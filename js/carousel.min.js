var VNCarousel=function(a,b){"use strict";var c,d=this;d.elem=a,d.totalCloned=0,d.transitionEnd=d.transitionEndEventName(),d.didResize=!1,d.defaults={slidesWrapper:".js-carousel-slides-wrapper",carouselPrev:".js-carousel-prev",carouselNext:".js-carousel-next",carouselPagination:".js-carousel-pagination",infinite:!0,slidesPerPage:5,slidesToMove:null,initialSlide:1,peekingPercentage:0,edgeWeight:.2,centerCurrentSlides:!1,paginationMarkup:'<button class="carousel-pagination-item"></button>',responsive:[],onInit:function(){},afterChange:function(){},beforeChange:function(){},hitEdge:function(){}};for(c in b)b.hasOwnProperty(c)&&(d.defaults[c]=b[c]);d.defaults.responsive.sort(function(a,b){return parseFloat(a.breakpoint)-parseFloat(b.breakpoint)}),"classList"in document.createElement("_")&&document.addEventListener("DOMContentLoaded",function(){d.init(),d.onInit()})};VNCarousel.prototype.init=function(a){var b=this;b.getCurrentBreakpoint();for(var c in b.defaults)b.defaults.hasOwnProperty(c)&&(b[c]=b.updateBreakpointProperties(c));void 0===a&&(a=b.initialSlide),null===b.slidesToMove?b.slidesToMove=b.slidesPerPage:b.slidesToMove=Math.min(b.slidesToMove,b.slidesPerPage),b.slidesWrapper=b.elem.querySelector(b.slidesWrapper),b.carouselPrev=b.elem.querySelector(b.carouselPrev),b.carouselNext=b.elem.querySelector(b.carouselNext),b.paginationWrapper=b.elem.querySelector(b.carouselPagination),b.peekingPercentage=b.peekingPercentage/100,b.carouselSlide=b.slidesWrapper.children,b.totalChildren=b.carouselSlide.length,b.totalPagesFraction=b.totalChildren/b.slidesToMove,b.totalPages=Math.ceil(b.totalPagesFraction),b.totalSlides=b.totalChildren-b.totalCloned,b.slidesRemainder=b.totalSlides%b.slidesToMove,b.addStylingClasses(),this.totalChildren>b.slidesToMove?(b.buildCarousel(),b.goToSlide(a,!1),b.updatePagination(b.currentPage)):b.buildNoCarousel(),b.addUIListeners()},VNCarousel.prototype.buildCarousel=function(){var a=this;a.infinite&&a.cloneSlides();var b=100/a.totalChildren;a.peekingWidth=b*a.peekingPercentage,a.carouselWidth=(b-2*a.peekingWidth)/a.slidesPerPage,a.slidesWrapper.style.width=100*a.totalChildren+"%";for(var c=0;c<a.carouselSlide.length;c++)a.carouselSlide[c].style.width=a.carouselWidth+"%";a.buildPagination()},VNCarousel.prototype.buildNoCarousel=function(){for(var a=this,b=0;b<a.totalChildren;b++)a.carouselSlide[b].style.width=100/a.slidesPerPage+"%";a.elem.classList.add("no-carousel")},VNCarousel.prototype.addStylingClasses=function(){var a=this;a.elem.classList.add("carousel"),a.slidesWrapper.classList.add("carousel-slides-wrapper");for(var b=0;b<a.totalChildren;b++)a.carouselSlide[b].classList.add("carousel-slide")},VNCarousel.prototype.cloneSlides=function(){var a,b=this;for(a=0;a<=b.slidesPerPage;a++){var c=b.carouselSlide[a],d=c.cloneNode(!0);b.slidesWrapper.appendChild(d),d.classList.add("cloned-slide")}for(a=0;a<=b.slidesPerPage;a++){var e=b.carouselSlide[2*a+b.totalChildren-b.slidesPerPage-1],f=e.cloneNode(!0);b.slidesWrapper.insertBefore(f,b.carouselSlide[a]),f.classList.add("cloned-slide")}b.carouselSlide=b.slidesWrapper.children,b.totalCloned=b.carouselSlide.length-b.totalChildren,b.totalChildren=b.carouselSlide.length,b.clonedSlides=document.querySelectorAll(".cloned-slide")},VNCarousel.prototype.setCarouselOffset=function(a,b){var c=this;c.slidesWrapper.classList.remove("carousel-transition"),b!==!1&&c.slidesWrapper.classList.add("carousel-transition"),c.slidesWrapper.style.webkitTransform="translate3d("+-1*a+"%,0,0)",c.slidesWrapper.style.transform="translate3d("+-1*a+"%,0,0)"},VNCarousel.prototype.goToPage=function(a,b){var c=this;c.transitioning||(c.pageBeforeMoving=c.currentPageFraction,a=c.infinite?Math.max(0,Math.min(a,c.totalPagesFraction+1)):Math.max(1,Math.min(a,c.totalPagesFraction)),0!==c.slidesRemainder&&a===c.totalPages?a-=1-c.slidesRemainder/c.slidesToMove:a<c.totalPages-1&&(a=Math.ceil(a)),c.pageBeforeMoving!==a&&(b!==!1&&(c.transitioning=!0,c.beforeChange()),c.currentPageFraction=a,c.currentPage=Math.ceil(a),c.firstOfCurrentPage=Math.round((a-1)*c.slidesToMove+1),c.currentSlides=c.getCurrentSlides(),c.infinite||(c.carouselPrev.classList.remove("carousel-nav-disabled"),c.carouselNext.classList.remove("carousel-nav-disabled"),1===c.currentPage?(c.carouselPrev.classList.add("carousel-nav-disabled"),c.hitEdge()):c.currentPage===c.totalPages&&(c.carouselNext.classList.add("carousel-nav-disabled"),c.hitEdge()))),c.styleCurrentSlides(),c.setCarouselOffset(c.getPageOffset(),b))},VNCarousel.prototype.goToSlide=function(a,b){var c=this,d=Math.ceil(a/c.slidesToMove);d=Math.max(1,Math.min(d,c.totalPages)),c.goToPage(d,b)},VNCarousel.prototype.goToNextPage=function(){var a=this,b=a.currentPageFraction+1;a.goToPage(b)},VNCarousel.prototype.goToPrevPage=function(){var a=this,b=a.currentPageFraction-1;a.goToPage(b)},VNCarousel.prototype.moveFromCloned=function(){var a=this,b=a.currentPage,c=a.totalPages+1;0===b?a.goToPage(a.totalPages,!1):b===c&&a.goToPage(1,!1)},VNCarousel.prototype.getCurrentSlides=function(){var a,b=this;if(b.firstOfCurrentPage=Math.round((b.currentPageFraction-1)*b.slidesToMove+1),b.slidesToMove>1){a=[];for(var c=0;c<b.slidesToMove;c++)a.push(b.firstOfCurrentPage+c)}else a=b.firstOfCurrentPage;return a},VNCarousel.prototype.styleCurrentSlides=function(){var a,b=this;for(a=0;a<b.totalChildren;a++)b.carouselSlide[a].classList.remove("carousel-slide-selected"),b.carouselSlide[a].classList.remove("carousel-slide-prev"),b.carouselSlide[a].classList.remove("carousel-slide-next");for(a=0;a<b.slidesToMove;a++){var c=b.firstOfCurrentPage+b.totalCloned/2+a-1;b.carouselSlide[c].classList.add("carousel-slide-selected")}var d=b.firstOfCurrentPage+b.totalCloned/2-2,e=b.firstOfCurrentPage+b.slidesToMove+b.totalCloned/2-1,f=b.carouselSlide[d],g=b.carouselSlide[e];f&&f.classList.add("carousel-slide-prev"),g&&g.classList.add("carousel-slide-next")},VNCarousel.prototype.buildPagination=function(){var a=this;if(a.paginationWrapper){a.paginationWrapper.classList.add("carousel-pagination"),a.paginationWrapper.innerHTML=a.paginationMarkup,a.paginationItem=a.paginationWrapper.children,a.paginationItem[0].innerHTML="1";for(var b=0;b<a.totalPages-1;b++){var c=a.paginationItem[0].cloneNode(!0);a.paginationItem[0].parentNode.appendChild(c),a.paginationItem[b+1].innerHTML=b+2}var d=a.paginationItem[0];d.classList.add("carousel-pagination-selected")}},VNCarousel.prototype.updatePagination=function(a){var b=this;if(b.paginationWrapper){for(var c=0;c<b.paginationItem.length;c++)b.paginationItem[c].classList.remove("carousel-pagination-selected");b.infinite&&0===a?b.paginationItem[b.totalPages-1].classList.add("carousel-pagination-selected"):b.paginationItem[a-1].classList.add("carousel-pagination-selected")}},VNCarousel.prototype.getPaginationClick=function(a){for(var b=this,c=a.target;c!=b.paginationWrapper;)b.goToClickedPagination(c),c=c.parentNode},VNCarousel.prototype.goToClickedPagination=function(a){var b=this,c=Array.prototype.slice.call(a.parentNode.children),d=c.indexOf(a)+1;b.goToPage(d)},VNCarousel.prototype.goToClickedPeeking=function(a){for(var b=this,c=a.target;c!=b.slidesWrapper;)c.classList.contains("carousel-slide-prev")?b.goToPrevPage():c.classList.contains("carousel-slide-next")&&b.goToNextPage(),c=c.parentNode},VNCarousel.prototype.updateAfterTransition=function(){var a=this;a.transitioning=!1,a.slidesWrapper.classList.remove("carousel-transition"),a.infinite&&a.moveFromCloned(),a.updatePagination(a.currentPage),a.pageBeforeMoving!==a.currentPageFraction&&a.afterChange()},VNCarousel.prototype.getPageOffset=function(){var a,b=this,c=b.carouselWidth*b.totalCloned/2,d=b.peekingWidth/b.slidesToMove,e=b.carouselWidth*(b.currentPageFraction-1)-d,f=100/b.totalChildren,g=b.carouselWidth*b.slidesToMove,h=f/2-b.peekingWidth-g/2;return a=b.centerCurrentSlides?e*b.slidesToMove+c-h:e*b.slidesToMove+c},VNCarousel.prototype.getCurrentBreakpoint=function(){var a,b=this;for(a=0;a<b.defaults.responsive.length;a++)window.innerWidth>b.defaults.responsive[a].breakpoint&&(b.bp=a)},VNCarousel.prototype.updateBreakpointProperties=function(a){var b,c,d,e=this,f=e.defaults[a];if(void 0!==e.bp&&(b=e.defaults.responsive[e.bp].settings[a]),void 0!==b)return b;for(d=e.bp;d>=0;d--)if(c=e.defaults.responsive[d].settings[a],void 0!==c)return c;return void 0===c?f:void 0},VNCarousel.prototype.listenToBreakpoints=function(){var a,b,c=this,d=window.innerWidth;void 0!==c.bp?(c.bp!==c.defaults.responsive.length-1&&(b=c.defaults.responsive[c.bp+1].breakpoint),a=0!==c.bp?c.defaults.responsive[c.bp-1].breakpoint:c.defaults.responsive[0].breakpoint):b=c.defaults.responsive[0].breakpoint,(d>b||a>d)&&(c.destroy(),c.init(c.firstOfCurrentPage))},VNCarousel.prototype.addTouchListeners=function(a){var b=this;if(!b.transitioning)switch(a.type){case"panstart":b.carouselWidthPx=b.carouselSlide[0].getBoundingClientRect().width;break;case"panright":case"panleft":b.pctDragged=a.deltaX/b.carouselWidthPx;var c=-b.pctDragged*b.carouselWidth;b.infinite||(1===b.currentPage&&a.deltaX>0||b.currentPage===b.totalPages&&a.deltaX<0)&&(c*=b.edgeWeight);var d=c+b.getPageOffset();b.setCarouselOffset(d,!1),a.preventDefault();break;case"panend":Math.abs(b.pctDragged)>.2?a.deltaX>0?b.goToPrevPage():b.goToNextPage():b.goToPage(b.currentPage)}},VNCarousel.prototype.keyboardEvents=function(a){var b=this,c=a.keyCode,d=37,e=39;b.isFocused===!0&&(c===d?b.goToPrevPage():c===e&&b.goToNextPage())},VNCarousel.prototype.destroy=function(){var a,b=this;if(b.clonedSlides)for(a=0;a<b.clonedSlides.length;a++)b.clonedSlides[a].remove();if(b.paginationItem)for(a=0;b.paginationItem.length;a++)b.paginationItem[0].remove();for(b.elem.classList.remove("carousel"),b.slidesWrapper.removeAttribute("style"),b.slidesWrapper.classList.remove("carousel-slides-wrapper"),a=0;a<b.carouselSlide.length;a++)b.carouselSlide[a].classList.remove("carousel-slide"),b.carouselSlide[a].classList.remove("carousel-slide-selected"),b.carouselSlide[a].classList.remove("carousel-slide-prev"),b.carouselSlide[a].classList.remove("carousel-slide-next"),b.carouselSlide[a].removeAttribute("style");b.totalChildren=b.carouselSlide.length,b.totalCloned=0,b.carouselWidth=void 0,b.bp=void 0,b.createHammer&&b.createHammer.destroy(),b.carouselNext&&b.carouselNext.removeEventListener("click",b.carouselNextAction),b.carouselPrev&&b.carouselPrev.removeEventListener("click",b.carouselPrevAction)},VNCarousel.prototype.addUIListeners=function(){var a=this;a.totalSlides>a.slidesToMove&&(a.carouselNextAction=a.goToNextPage.bind(a),a.carouselPrevAction=a.goToPrevPage.bind(a),a.carouselNext&&a.carouselNext.addEventListener("click",a.carouselNextAction),a.carouselPrev&&a.carouselPrev.addEventListener("click",a.carouselPrevAction),a.paginationWrapper&&a.paginationWrapper.addEventListener("click",a.getPaginationClick.bind(a)),a.slidesWrapper.addEventListener("click",a.goToClickedPeeking.bind(a)),a.slidesWrapper.addEventListener(a.transitionEnd,a.updateAfterTransition.bind(a)),a.createHammer=new Hammer(a.slidesWrapper),a.createHammer.on("panstart panleft panright panend",a.addTouchListeners.bind(a)),document.addEventListener("click",function(b){a.isFocused=!1,a.elem.contains(b.target)&&(a.isFocused=!0)}),document.addEventListener("keyup",a.keyboardEvents.bind(a))),window.addEventListener("resize",function(){a.didResize=!0}),setInterval(function(){a.didResize&&(a.didResize=!1,a.listenToBreakpoints())},100)},VNCarousel.prototype.transitionEndEventName=function(){var a=document.createElement("div"),b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var c in b)if(b.hasOwnProperty(c)&&void 0!==a.style[c])return b[c]},VNCarousel.prototype.prevNode=function(a){do a=a.previousSibling;while(a&&1!==a.nodeType);return a},VNCarousel.prototype.nextNode=function(a){do a=a.nextSibling;while(a&&1!==a.nodeType);return a};