var VNCarousel=function(a,b){"use strict";var c,d=this;d.defaults={slidesWrapper:".js-carousel-slides-wrapper",carouselPrev:".js-carousel-prev",carouselNext:".js-carousel-next",carouselPagination:".js-carousel-pagination",infinite:!0,slidesPerPage:1,peekingPercentage:0,responsive:[],onInit:function(){},afterChange:function(){},beforeChange:function(){}};for(c in b)b.hasOwnProperty(c)&&(d.defaults[c]=b[c]);d.getCurrentBreakpoint();for(c in d.defaults)d.defaults.hasOwnProperty(c)&&(d[c]=d.listenToBreakpoints(c));d.elem=a,d.slidesWrapper=a.querySelector(d.slidesWrapper),d.carouselPrev=a.querySelector(d.carouselPrev),d.carouselNext=a.querySelector(d.carouselNext),d.paginationWrapper=a.querySelector(d.carouselPagination),d.peekingPercentage=d.peekingPercentage/100,d.carouselSlide=d.slidesWrapper.children,d.totalChildren=d.carouselSlide.length,d.totalPagesFraction=d.totalChildren/d.slidesPerPage,d.totalPages=Math.ceil(d.totalPagesFraction),d.totalCloned=0,d.totalSlides=d.totalChildren-d.totalCloned,d.transitionEnd=d.transitionEndEventName(),d.slidesRemainder=d.totalSlides%d.slidesPerPage,"classList"in document.createElement("_")&&document.addEventListener("DOMContentLoaded",function(){d.init()})};VNCarousel.prototype.init=function(){var a=this;a.addStylingClasses(),this.totalChildren>a.slidesPerPage?(a.buildCarousel(),a.goToPage(1,!1)):a.buildNoCarousel(),a.onInit()},VNCarousel.prototype.buildCarousel=function(){var a=this;a.infinite&&a.cloneSlides();var b=100/a.totalChildren;a.peekingWidth=b*a.peekingPercentage,a.carouselWidth=(b-2*a.peekingWidth)/a.slidesPerPage,a.slidesWrapper.style.width=100*a.totalChildren+"%";for(var c=0;c<a.carouselSlide.length;c++)a.carouselSlide[c].style.width=a.carouselWidth+"%";a.buildPagination(),a.addUIListeners(a.afterChange)},VNCarousel.prototype.buildNoCarousel=function(){for(var a=this,b=0;b<a.totalChildren;b++)a.carouselSlide[b].style.width=100/a.slidesPerPage+"%";a.elem.classList.add("no-carousel")},VNCarousel.prototype.addStylingClasses=function(){var a=this;a.elem.classList.add("carousel"),a.slidesWrapper.classList.add("carousel-slides-wrapper");for(var b=0;b<a.totalChildren;b++)a.carouselSlide[b].classList.add("carousel-slide")},VNCarousel.prototype.cloneSlides=function(){var a,b=this;for(a=0;a<=b.slidesPerPage;a++){var c=b.carouselSlide[a],d=c.cloneNode(!0);b.slidesWrapper.appendChild(d)}for(a=0;a<=b.slidesPerPage;a++){var e=b.carouselSlide[2*a+b.totalChildren-b.slidesPerPage-1],f=e.cloneNode(!0);b.slidesWrapper.insertBefore(f,b.carouselSlide[a])}b.carouselSlide=b.slidesWrapper.children,b.totalCloned=b.carouselSlide.length-b.totalChildren,b.totalChildren=b.carouselSlide.length},VNCarousel.prototype.setCarouselOffset=function(a,b){var c=this;c.slidesWrapper.classList.remove("carousel-transition"),b!==!1&&c.slidesWrapper.classList.add("carousel-transition"),c.slidesWrapper.style.webkitTransform="translate3d("+-1*a+"%,0,0)",c.slidesWrapper.style.transform="translate3d("+-1*a+"%,0,0)"},VNCarousel.prototype.goToPage=function(a,b){var c=this;c.transitioning||(c.pageBeforeMoving=c.currentPageFraction,a=c.infinite?Math.max(0,Math.min(a,c.totalPagesFraction+1)):Math.max(1,Math.min(a,c.totalPagesFraction)),0!==c.slidesRemainder&&a===c.totalPages?a-=1-c.slidesRemainder/c.slidesPerPage:a<c.totalPages-1&&(a=Math.ceil(a)),c.pageBeforeMoving!==a&&(b!==!1&&(c.transitioning=!0,c.beforeChange()),c.currentPageFraction=a,c.currentPage=Math.ceil(a),c.firstOfCurrentPage=Math.round((a-1)*c.slidesPerPage+1),c.currentSlides=c.getCurrentSlides(),c.styleCurrentSlides()),c.setCarouselOffset(c.getPageOffset(),b))},VNCarousel.prototype.goToSlide=function(a){var b=this,c=Math.ceil(a/b.slidesPerPage);c=Math.max(1,Math.min(c,b.totalPages)),b.goToPage(c)},VNCarousel.prototype.goToNextPage=function(){var a=this,b=a.currentPageFraction+1;a.goToPage(b)},VNCarousel.prototype.goToPrevPage=function(){var a=this,b=a.currentPageFraction-1;a.goToPage(b)},VNCarousel.prototype.moveFromCloned=function(){var a=this,b=a.currentPage,c=a.totalPages+1;0===b?a.goToPage(a.totalPages,!1):b===c&&a.goToPage(1,!1)},VNCarousel.prototype.getCurrentSlides=function(){var a,b=this;if(b.firstOfCurrentPage=Math.round((b.currentPageFraction-1)*b.slidesPerPage+1),b.slidesPerPage>1){a=[];for(var c=0;c<b.slidesPerPage;c++)a.push(b.firstOfCurrentPage+c)}else a=b.firstOfCurrentPage;return a},VNCarousel.prototype.styleCurrentSlides=function(){var a,b=this;for(a=0;a<b.totalChildren;a++)b.carouselSlide[a].classList.remove("carousel-slide-selected"),b.carouselSlide[a].classList.remove("carousel-slide-prev"),b.carouselSlide[a].classList.remove("carousel-slide-next");for(a=0;a<b.slidesPerPage;a++){var c=b.firstOfCurrentPage+b.totalCloned/2+a-1;b.carouselSlide[c].classList.add("carousel-slide-selected")}var d=b.slidesWrapper.querySelectorAll(".carousel-slide-selected"),e=d[0],f=d[b.slidesPerPage-1],g=b.prevNode(e),h=b.nextNode(f);g&&g.classList.add("carousel-slide-prev"),h&&h.classList.add("carousel-slide-next")},VNCarousel.prototype.buildPagination=function(){var a=this;if(a.paginationWrapper){a.paginationWrapper.classList.add("carousel-pagination"),a.paginationWrapper.innerHTML='<button class="carousel-pagination-item">1</button>',a.paginationItem=a.paginationWrapper.children;for(var b=0;b<a.totalPages-1;b++){var c=a.paginationItem[0].cloneNode(!0);a.paginationItem[0].parentNode.appendChild(c),a.paginationItem[b+1].innerHTML=b+2}var d=a.paginationItem[0];d.classList.add("carousel-pagination-selected")}},VNCarousel.prototype.updatePagination=function(a){var b=this;if(b.paginationWrapper){for(var c=0;c<b.paginationItem.length;c++)b.paginationItem[c].classList.remove("carousel-pagination-selected");b.infinite&&0===a?b.paginationItem[b.totalPages-1].classList.add("carousel-pagination-selected"):b.paginationItem[a-1].classList.add("carousel-pagination-selected")}},VNCarousel.prototype.getPaginationClick=function(a){for(var b=this,c=a.target;c!=b.paginationWrapper;)b.goToClickedPagination(c),c=c.parentNode},VNCarousel.prototype.goToClickedPagination=function(a){var b=this,c=Array.prototype.slice.call(a.parentNode.children),d=c.indexOf(a)+1;b.goToPage(d)},VNCarousel.prototype.goToClickedPeeking=function(a){for(var b=this,c=a.target;c!=b.slidesWrapper;)c.classList.contains("carousel-slide-prev")?b.goToPrevPage():c.classList.contains("carousel-slide-next")&&b.goToNextPage(),c=c.parentNode},VNCarousel.prototype.updateAfterTransition=function(){var a=this;a.transitioning=!1,a.infinite&&a.moveFromCloned(),a.updatePagination(a.currentPage),a.pageBeforeMoving!==a.currentPageFraction&&a.afterChange()},VNCarousel.prototype.getPageOffset=function(){var a=this,b=a.carouselWidth*a.totalCloned/2,c=a.peekingWidth/a.slidesPerPage,d=a.carouselWidth*(a.currentPageFraction-1)-c,e=d*a.slidesPerPage+b;return e},VNCarousel.prototype.getCurrentBreakpoint=function(){var a,b=this;for(b.defaults.responsive.sort(function(a,b){return parseFloat(a.breakpoint)-parseFloat(b.breakpoint)}),a=0;a<b.defaults.responsive.length;a++)window.innerWidth>b.defaults.responsive[a].breakpoint&&(b.bp=a)},VNCarousel.prototype.listenToBreakpoints=function(a){var b,c,d,e=this,f=e.defaults[a];if(void 0!==e.bp&&(b=e.defaults.responsive[e.bp].settings[a]),void 0!==b)return b;for(d=e.bp;d>=0;d--)if(c=e.defaults.responsive[d].settings[a],void 0!==c)return c;return void 0===c?f:void 0},VNCarousel.prototype.addTouchListeners=function(a){var b=this;if(!b.transitioning)switch(a.type){case"panstart":b.carouselWidthPx=b.carouselSlide[0].getBoundingClientRect().width;break;case"panright":case"panleft":b.pctDragged=a.deltaX/b.carouselWidthPx;var c=-b.pctDragged*b.carouselWidth;b.infinite||(1===b.currentPage&&a.deltaX>0||b.currentPage===b.totalPages&&a.deltaX<0)&&(c*=.3);var d=c+b.getPageOffset();b.setCarouselOffset(d,!1),a.preventDefault();break;case"panend":Math.abs(b.pctDragged)>.2?a.deltaX>0?b.goToPrevPage():b.goToNextPage():b.goToPage(b.currentPage)}},VNCarousel.prototype.keyboardEvents=function(a){var b=this,c=a.keyCode,d=37,e=39;b.isFocused===!0&&(c===d?b.goToPrevPage():c===e&&b.goToNextPage())},VNCarousel.prototype.addUIListeners=function(){var a=this;a.carouselNext&&a.carouselNext.addEventListener("click",a.goToNextPage.bind(a)),a.carouselPrev&&a.carouselPrev.addEventListener("click",a.goToPrevPage.bind(a)),a.paginationWrapper&&a.paginationWrapper.addEventListener("click",a.getPaginationClick.bind(a)),a.slidesWrapper.addEventListener("click",a.goToClickedPeeking.bind(a)),a.slidesWrapper.addEventListener(a.transitionEnd,a.updateAfterTransition.bind(a)),a.createHammer=new Hammer(a.slidesWrapper),a.createHammer.on("panstart panleft panright panend",a.addTouchListeners.bind(a)),document.addEventListener("click",function(b){a.isFocused=!1,a.elem.contains(b.target)&&(a.isFocused=!0)}),document.addEventListener("keyup",a.keyboardEvents.bind(a))},VNCarousel.prototype.transitionEndEventName=function(){var a=document.createElement("div"),b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var c in b)if(b.hasOwnProperty(c)&&void 0!==a.style[c])return b[c]},VNCarousel.prototype.prevNode=function(a){do a=a.previousSibling;while(a&&1!==a.nodeType);return a},VNCarousel.prototype.nextNode=function(a){do a=a.nextSibling;while(a&&1!==a.nodeType);return a};