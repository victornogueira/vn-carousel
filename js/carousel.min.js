var VNCarousel=function(a,b){"use strict";var c=this;c.elem=a,c.totalCloned=0,c.didResize=!1,c.defaults={slidesWrapper:".js-carousel-slides-wrapper",carouselPrev:".js-carousel-prev",carouselNext:".js-carousel-next",carouselPagination:".js-carousel-pagination",infinite:!0,slidesPerPage:5,slidesToMove:null,initialSlide:1,peekingPercentage:0,edgeWeight:.2,centerSlides:!0,swipeThreshold:.1,grabbingCursor:!0,speed:500,timing:"ease-out",paginationMarkup:'<button class="carousel-pagination-item"></button>',responsive:[],rtl:!1,respondTo:"window",onInit:function(){},afterChange:function(){},beforeChange:function(){},hitEdge:function(){}};for(var d in b)b.hasOwnProperty(d)&&(c.defaults[d]=b[d]);c.defaults.responsive.sort(function(a,b){return parseFloat(a.breakpoint)-parseFloat(b.breakpoint)}),"classList"in document.createElement("_")&&(c.init(),c.onInit())};VNCarousel.prototype.init=function(a){var b=this;b.getCurrentBreakpoint();for(var c in b.defaults)b.defaults.hasOwnProperty(c)&&(b[c]=b.updateBreakpointProperties(c));void 0===a&&(a=b.initialSlide),null===b.slidesToMove?b.slidesToMove=b.slidesPerPage:b.slidesToMove=Math.min(b.slidesToMove,b.slidesPerPage),b.slidesWrapper=b.elem.querySelector(b.slidesWrapper),b.carouselPrev=b.elem.querySelector(b.carouselPrev),b.carouselNext=b.elem.querySelector(b.carouselNext),b.paginationWrapper=b.elem.querySelector(b.carouselPagination),b.peekingPercentage=b.peekingPercentage/100,b.carouselSlide=b.slidesWrapper.children,b.totalChildren=b.carouselSlide.length,b.totalPagesFraction=b.totalChildren/b.slidesToMove,b.totalPages=Math.ceil(b.totalPagesFraction),b.totalSlides=b.totalChildren-b.totalCloned,b.slidesRemainder=b.totalSlides%b.slidesToMove,b.addStylingClasses(),this.totalChildren>b.slidesToMove?(b.buildCarousel(),b.goToSlide(a,!1),b.updatePagination(b.currentPage)):b.buildNoCarousel(),b.addUIListeners(),b.elem.classList.remove("carousel-off"),b.off&&(b.destroy(),b.elem.classList.add("carousel-off"))},VNCarousel.prototype.buildCarousel=function(){var a=this,b=100-100*a.peekingPercentage*2;a.infinite&&a.cloneSlides(),a.slideWidth=100/a.totalChildren,a.slidesWrapper.style.width=a.totalChildren/a.slidesPerPage*b+"%";for(var c=0;c<a.carouselSlide.length;c++)a.carouselSlide[c].style.width=a.slideWidth+"%";a.buildPagination()},VNCarousel.prototype.buildNoCarousel=function(){for(var a=this,b=0;b<a.totalChildren;b++)a.carouselSlide[b].style.width=100/a.slidesPerPage+"%";a.elem.classList.add("no-carousel")},VNCarousel.prototype.addStylingClasses=function(){var a=this;a.elem.classList.add("carousel"),a.slidesWrapper.classList.add("carousel-slides-wrapper");for(var b=0;b<a.totalChildren;b++)a.carouselSlide[b].classList.add("carousel-slide")},VNCarousel.prototype.cloneSlides=function(){var a,b=this;for(a=0;a<=b.slidesPerPage;a++){var c=b.carouselSlide[a],d=c.cloneNode(!0);b.slidesWrapper.appendChild(d),d.classList.add("cloned-slide")}for(a=0;a<=b.slidesPerPage;a++){var e=b.carouselSlide[2*a+b.totalChildren-b.slidesPerPage-1],f=e.cloneNode(!0);b.slidesWrapper.insertBefore(f,b.carouselSlide[a]),f.classList.add("cloned-slide")}b.carouselSlide=b.slidesWrapper.children,b.totalCloned=b.carouselSlide.length-b.totalChildren,b.totalChildren=b.carouselSlide.length,b.clonedSlides=document.querySelectorAll(".cloned-slide")},VNCarousel.prototype.setCarouselOffset=function(a,b){var c=this;c.Utils.removeTransition(c.slidesWrapper),b!==!1&&c.Utils.addTransition(c.slidesWrapper,c.speed,c.timing),c.rtl?c.Utils.add3DTransform(c.slidesWrapper,a):c.Utils.add3DTransform(c.slidesWrapper,-1*a)},VNCarousel.prototype.goToPage=function(a,b){var c=this;c.transitioning||(c.pageBeforeMoving=c.currentPageFraction,a=c.infinite?Math.max(0,Math.min(a,c.totalPagesFraction+1)):Math.max(1,Math.min(a,c.totalPagesFraction)),0!==c.slidesRemainder&&a===c.totalPages?a-=1-c.slidesRemainder/c.slidesToMove:a<c.totalPages-1&&(a=Math.ceil(a)),c.pageBeforeMoving!==a&&(b!==!1&&(c.transitioning=!0,c.beforeChange()),c.currentPageFraction=a,c.currentPage=Math.ceil(a),c.firstOfCurrentPage=Math.round((a-1)*c.slidesToMove+1),c.currentSlides=c.getCurrentSlides(),c.infinite||(c.carouselPrev.classList.remove("carousel-nav-disabled"),c.carouselNext.classList.remove("carousel-nav-disabled"),1===c.currentPage?(c.carouselPrev.classList.add("carousel-nav-disabled"),c.hitEdge()):c.currentPage===c.totalPages&&(c.carouselNext.classList.add("carousel-nav-disabled"),c.hitEdge()))),c.styleCurrentSlides(),c.setCarouselOffset(c.getPageOffset(),b))},VNCarousel.prototype.goToSlide=function(a,b){var c=this,d=Math.ceil(a/c.slidesToMove);d=Math.max(1,Math.min(d,c.totalPages)),c.goToPage(d,b)},VNCarousel.prototype.goToNextPage=function(){var a=this,b=a.currentPageFraction+1;a.goToPage(b)},VNCarousel.prototype.goToPrevPage=function(){var a=this,b=a.currentPageFraction-1;a.goToPage(b)},VNCarousel.prototype.moveFromCloned=function(){var a=this,b=a.currentPage,c=a.totalPages+1;0===b?a.goToPage(a.totalPages,!1):b===c&&a.goToPage(1,!1)},VNCarousel.prototype.getCurrentSlides=function(){var a,b=this;if(b.firstOfCurrentPage=Math.round((b.currentPageFraction-1)*b.slidesToMove+1),b.slidesToMove>1){a=[];for(var c=0;c<b.slidesToMove;c++)a.push(b.firstOfCurrentPage+c)}else a=b.firstOfCurrentPage;return a},VNCarousel.prototype.styleCurrentSlides=function(){var a,b=this;for(a=0;a<b.totalChildren;a++)b.carouselSlide[a].classList.remove("carousel-slide-selected");for(a=0;a<b.slidesToMove;a++){var c=b.firstOfCurrentPage+b.totalCloned/2+a-1;b.carouselSlide[c].classList.add("carousel-slide-selected")}},VNCarousel.prototype.buildPagination=function(){var a=this;if(a.paginationWrapper){a.paginationWrapper.classList.add("carousel-pagination"),a.paginationWrapper.innerHTML=a.paginationMarkup,a.paginationItem=a.paginationWrapper.children;var b=a.paginationItem[0];b.innerHTML="1";for(var c=0;c<a.totalPages-1;c++){var d=a.paginationItem[0].cloneNode(!0);a.paginationItem[0].parentNode.appendChild(d),a.paginationItem[c+1].innerHTML=c+2}b.classList.add("carousel-pagination-selected")}},VNCarousel.prototype.updatePagination=function(a){var b=this;if(b.paginationWrapper){for(var c=0;c<b.paginationItem.length;c++)b.paginationItem[c].classList.remove("carousel-pagination-selected");b.infinite&&0===a?b.paginationItem[b.totalPages-1].classList.add("carousel-pagination-selected"):b.paginationItem[a-1].classList.add("carousel-pagination-selected")}},VNCarousel.prototype.getPaginationClick=function(a){for(var b=this,c=a.target;c!=b.paginationWrapper;)b.goToClickedPagination(c),c=c.parentNode},VNCarousel.prototype.goToClickedPagination=function(a){var b=this,c=Array.prototype.slice.call(a.parentNode.children),d=c.indexOf(a)+1;b.goToPage(d)},VNCarousel.prototype.updateAfterTransition=function(a){var b=this;a.srcElement===b.slidesWrapper&&(b.transitioning=!1,b.Utils.removeTransition(b.slidesWrapper),b.infinite&&b.moveFromCloned(),b.updatePagination(b.currentPage),b.pageBeforeMoving!==b.currentPageFraction&&b.afterChange())},VNCarousel.prototype.getPageOffset=function(){var a=this,b=a.slideWidth*a.totalCloned/2,c=a.slideWidth*a.peekingPercentage/(1-2*a.peekingPercentage),d=a.slideWidth*(a.currentPageFraction-1);a.centerSlides?d-=c:(d=a.slideWidth*(a.currentPageFraction-1),a.currentPage!==a.totalPages||a.infinite||(d-=2*c));var e=d*a.slidesToMove+b;return e},VNCarousel.prototype.getCurrentBreakpoint=function(){var a,b,c=this;for(a="window"==c.respondTo?window.innerWidth-c.Utils.getScrollbarWidth():c.elem.getBoundingClientRect().width,b=0;b<c.defaults.responsive.length;b++)a>c.defaults.responsive[b].breakpoint&&(c.bp=b)},VNCarousel.prototype.updateBreakpointProperties=function(a){var b,c,d,e=this,f=e.defaults[a];if(void 0!==e.bp&&(b=e.defaults.responsive[e.bp].settings[a]),void 0!==b)return b;for(d=e.bp;d>=0;d--)if(c=e.defaults.responsive[d].settings[a],void 0!==c)return c;return void 0===c?f:void 0},VNCarousel.prototype.listenToBreakpoints=function(){var a,b,c,d=this;a="window"==d.respondTo?window.innerWidth-d.Utils.getScrollbarWidth():d.elem.getBoundingClientRect().width,void 0!==d.bp?(d.bp!==d.defaults.responsive.length-1&&(c=d.defaults.responsive[d.bp+1].breakpoint),b=0!==d.bp?d.defaults.responsive[d.bp].breakpoint:d.defaults.responsive[0].breakpoint):c=d.defaults.responsive[0].breakpoint,(a>c||b>a)&&(d.destroy(),d.init(d.firstOfCurrentPage))},VNCarousel.prototype.addTouchListeners=function(a){var b=this;if(!b.transitioning)switch(a.type){case"panstart":b.slideWidthPx=b.carouselSlide[0].getBoundingClientRect().width,b.grabbingCursor&&(b.elem.style.cursor="-webkit-grabbing",b.elem.style.cursor="grabbing");break;case"panright":case"panleft":var c;b.pctDragged=a.deltaX/b.slideWidthPx/b.slidesToMove,c=b.rtl?b.pctDragged*b.slideWidth*b.slidesToMove:-b.pctDragged*b.slideWidth*b.slidesToMove,b.infinite||(1===b.currentPage&&a.deltaX>0||b.currentPage===b.totalPages&&a.deltaX<0)&&(c*=b.edgeWeight);var d=c+b.getPageOffset();b.setCarouselOffset(d,!1),a.preventDefault();break;case"panend":Math.abs(b.pctDragged)>b.swipeThreshold?a.deltaX>0?b.rtl?b.goToNextPage():b.goToPrevPage():b.rtl?b.goToPrevPage():b.goToNextPage():b.goToPage(b.currentPage),b.elem.style.cursor=""}},VNCarousel.prototype.keyboardEvents=function(a){var b=this,c=a.keyCode,d=37,e=39;b.isFocused===!0&&(c===d?b.goToPrevPage():c===e&&b.goToNextPage())},VNCarousel.prototype.destroy=function(){var a,b=this;if(b.clonedSlides)for(a=0;a<b.clonedSlides.length;a++)b.clonedSlides[a].remove();if(b.paginationItem)for(a=0;b.paginationItem.length;a++)b.paginationItem[0].remove();for(b.elem.classList.remove("carousel"),b.slidesWrapper.removeAttribute("style"),b.slidesWrapper.classList.remove("carousel-slides-wrapper"),a=0;a<b.carouselSlide.length;a++)b.carouselSlide[a].classList.remove("carousel-slide"),b.carouselSlide[a].classList.remove("carousel-slide-selected"),b.carouselSlide[a].removeAttribute("style");b.totalChildren=b.carouselSlide.length,b.totalCloned=0,b.slideWidth=void 0,b.bp=void 0,b.createHammer&&b.createHammer.destroy(),b.carouselNext&&b.carouselNext.removeEventListener("click",b.carouselNextAction),b.carouselPrev&&b.carouselPrev.removeEventListener("click",b.carouselPrevAction)},VNCarousel.prototype.addUIListeners=function(){var a=this;a.totalSlides>a.slidesToMove&&(a.carouselNextAction=a.goToNextPage.bind(a),a.carouselPrevAction=a.goToPrevPage.bind(a),a.carouselNext&&a.carouselNext.addEventListener("click",a.carouselNextAction),a.carouselPrev&&a.carouselPrev.addEventListener("click",a.carouselPrevAction),a.paginationWrapper&&a.paginationWrapper.addEventListener("click",a.getPaginationClick.bind(a)),a.slidesWrapper.addEventListener(a.Utils.transitionEndEventName(),a.updateAfterTransition.bind(a)),document.addEventListener("click",function(b){a.isFocused=!1,a.elem.contains(b.target)&&(a.isFocused=!0)}),document.addEventListener("keyup",a.keyboardEvents.bind(a)),a.createHammer=new Hammer(a.slidesWrapper),a.createHammer.on("panstart panleft panright panend",a.addTouchListeners.bind(a))),window.addEventListener("resize",function(){a.didResize=!0}),setInterval(function(){a.didResize&&(a.listenToBreakpoints(),a.didResize=!1)},200)},VNCarousel.prototype.Utils={transitionEndEventName:function(){var a=document.createElement("div"),b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var c in b)if(b.hasOwnProperty(c)&&void 0!==a.style[c])return b[c]},addTransition:function(a,b,c){a.style.transition="transform "+b+"ms "+c,a.style.webkitTransition="transform "+b+"ms "+c,a.classList.add("carousel-transitioning")},removeTransition:function(a){a.style.transition="",a.style.webkitTransition="",a.classList.remove("carousel-transitioning")},add3DTransform:function(a,b){a.style.webkitTransform="translate3d("+b+"%,0,0)",a.style.transform="translate3d("+b+"%,0,0)"},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d}};